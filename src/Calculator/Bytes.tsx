import React from 'react';
import UnitConverter from './UnitConverter';

type Unit = 'B' | 'kB' | 'MB' | 'GB' | 'TB' | 'PB' | 'EB' | 'KiB' | 'MiB' | 'GiB' | 'TiB' | 'PiB' | 'EiB';

const Units: Record<Unit, string> = {
  'B': 'Byte(B)',
  'kB': 'Kilobyte(kB)',
  'MB': 'Megabyte(MB)',
  'GB': 'Gigabyte(GB)',
  'TB': 'Terabyte(TB)',
  'PB': 'Petabyte(PB)',
  'EB': 'Exabyte(EB)',
  'KiB': 'Kibibyte(KiB)',
  'MiB': 'Mebibyte(MiB)',
  'GiB': 'Gigibyte(GiB)',
  'TiB': 'Tebibyte(TiB)',
  'PiB': 'Pebibyte(PiB)',
  'EiB': 'Exbibyte(EiB)',
};

const conversionMap: Record<Unit, Record<Unit, number>> = {
  'B': {
    'B': 1,
    'kB': 0.001,
    'MB': 0.000001,
    'GB': 0.000000001,
    'TB': 0.000000000001,
    'PB': 0.000000000000001,
    'EB': 0.000000000000000001,
    'KiB': 0.000976563,
    'MiB': 0.000000954,
    'GiB': 0.000000000931,
    'TiB': 0.000000000000909,
    'PiB': 0.000000000000000888,
    'EiB': 0.000000000000000000867,
  },
  'kB': {
    'B': 1000,
    'kB': 1,
    'MB': 0.001,
    'GB': 0.000001,
    'TB': 0.000000001,
    'PB': 0.000000000001,
    'EB': 0.000000000000001,
    'KiB': 0.976563,
    'MiB': 0.000954,
    'GiB': 0.000000931,
    'TiB': 0.000000000909,
    'PiB': 0.000000000000888,
    'EiB': 0.000000000000000867,
  },
  'MB': {
    'B': 1000000,
    'kB': 1000,
    'MB': 1,
    'GB': 0.001,
    'TB': 0.000001,
    'PB': 0.000000001,
    'EB': 0.000000000001,
    'KiB': 976.563,
    'MiB': 0.954,
    'GiB': 0.000931,
    'TiB': 0.000000909,
    'PiB': 0.000000000888,
    'EiB': 0.000000000000867,
  },
  'GB': {
    'B': 1000000000,
    'kB': 1000000,
    'MB': 1000,
    'GB': 1,
    'TB': 0.001,
    'PB': 0.000001,
    'EB': 0.000000001,
    'KiB': 976563,
    'MiB': 954,
    'GiB': 0.931,
    'TiB': 0.000909,
    'PiB': 0.000000888,
    'EiB': 0.000000000867,
  },
  'TB': {
    'B': 1000000000000,
    'kB': 1000000000,
    'MB': 1000000,
    'GB': 1000,
    'TB': 1,
    'PB': 0.001,
    'EB': 0.000001,
    'KiB': 976563000,
    'MiB': 954000,
    'GiB': 931,
    'TiB': 0.909,
    'PiB': 0.000888,
    'EiB': 0.000000867,
  },
  'PB': {
    'B': 1000000000000000,
    'kB': 1000000000000,
    'MB': 1000000000,
    'GB': 1000000,
    'TB': 1000,
    'PB': 1,
    'EB': 0.001,
    'KiB': 976563000000,
    'MiB': 954000000,
    'GiB': 931000,
    'TiB': 909,
    'PiB': 0.888,
    'EiB': 0.000867,
  },
  'EB': {
    'B': 1000000000000000000,
    'kB': 1000000000000000,
    'MB': 1000000000000,
    'GB': 1000000000,
    'TB': 1000000,
    'PB': 1000,
    'EB': 1,
    'KiB': 976563000000000,
    'MiB': 954000000000,
    'GiB': 931000000,
    'TiB': 909000,
    'PiB': 888,
    'EiB': 0.867,
  },
  'KiB': {
    'B': 1024,
    'kB': 1.024,
    'MB': 0.001024,
    'GB': 0.000001024,
    'TB': 0.000000001024,
    'PB': 0.000000000001024,
    'EB': 0.000000000000001024,
    'KiB': 1,
    'MiB': 0.000976563,
    'GiB': 0.000000954,
    'TiB': 0.000000000931,
    'PiB': 0.000000000000909,
    'EiB': 0.000000000000000888,
  },
  'MiB': {
    'B': 1048576,
    'kB': 1024,
    'MB': 1.024,
    'GB': 0.001024,
    'TB': 0.000001024,
    'PB': 0.000000001024,
    'EB': 0.000000000001024,
    'KiB': 1024,
    'MiB': 1,
    'GiB': 0.000976563,
    'TiB': 0.000000954,
    'PiB': 0.000000000931,
    'EiB': 0.000000000000909,
  },
  'GiB': {
    'B': 1073741824,
    'kB': 1048576,
    'MB': 1024,
    'GB': 1.024,
    'TB': 0.001024,
    'PB': 0.000001024,
    'EB': 0.000000001024,
    'KiB': 1048576,
    'MiB': 1024,
    'GiB': 1,
    'TiB': 0.000976563,
    'PiB': 0.000000954,
    'EiB': 0.000000000931,
  },
  'TiB': {
    'B': 1099511627776,
    'kB': 1073741824,
    'MB': 1048576,
    'GB': 1024,
    'TB': 1.024,
    'PB': 0.001024,
    'EB': 0.000001024,
    'KiB': 1073741824,
    'MiB': 1048576,
    'GiB': 1024,
    'TiB': 1,
    'PiB': 0.000976563,
    'EiB': 0.000000954,
  },
  'PiB': {
    'B': 1125899906842624,
    'kB': 1099511627776,
    'MB': 1073741824,
    'GB': 1048576,
    'TB': 1024,
    'PB': 1.024,
    'EB': 0.001024,
    'KiB': 1099511627776,
    'MiB': 1073741824,
    'GiB': 1048576,
    'TiB': 1024,
    'PiB': 1,
    'EiB': 0.000976563,
  },
  'EiB': {
    'B': 1152921504606847000,
    'kB': 1125899906842624,
    'MB': 1099511627776,
    'GB': 1073741824,
    'TB': 1048576,
    'PB': 1024,
    'EB': 1.024,
    'KiB': 1125899906842624,
    'MiB': 1099511627776,
    'GiB': 1073741824,
    'TiB': 1048576,
    'PiB': 1024,
    'EiB': 1,
  },
};

const Bytes = ({ isLandscape } : { isLandscape: boolean}) => {

  const conversionFunction = (from: Unit, to: Unit, value: number): Promise<number> => {
    return new Promise((resolve, reject) => {
      if (from === to) {
        resolve(value);
      }
      else {
        resolve(conversionMap[from][to] * value);
      }
    });
  };

  return (
    <UnitConverter
      defaultFrom='kB'
      defaultTo='KiB'
      isLandscape={isLandscape}
      conversionFunction={conversionFunction}
      units={Units}
    />
  )
};

export default Bytes;